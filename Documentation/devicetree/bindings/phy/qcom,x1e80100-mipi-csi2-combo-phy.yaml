# SPDX-License-Identifier: (GPL-2.0 OR BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/phy/qcom,x1e80100-mipi-csi2-combo-phy.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Qualcomm MIPI CSI2 Combo PHY

maintainers:
  - Bryan O'Donoghue <bod@kernel.org>

description:
  Qualcomm MIPI CSI2 C-PHY/D-PHY combination PHY. Connects MIPI CSI2 sensors
  to Qualcomm's Camera CSI Decoder. The PHY supports both C-PHY and D-PHY
  modes.

properties:
  compatible:
    const: qcom,x1e80100-mipi-csi2-combo-phy

  reg:
    maxItems: 1

  "#phy-cells":
    const: 0

  clocks:
    maxItems: 4

  clock-names:
    items:
      - const: camnoc_axi
      - const: cpas_ahb
      - const: csiphy
      - const: csiphy_timer

  interrupts:
    maxItems: 1

  power-domains:
    maxItems: 1

  vdda-0p8-supply:
    description: Phandle to a 0.8V regulator supply to a PHY.

  vdda-1p2-supply:
    description: Phandle to 1.2V regulator supply to a PHY.

  phy-type:
    description: D-PHY or C-PHY mode
    enum: [ 10, 11 ]
    $ref: /schemas/types.yaml#/definitions/uint32

required:
  - compatible
  - reg
  - "#phy-cells"
  - clocks
  - clock-names
  - vdda-0p8-supply
  - vdda-1p2-supply
  - phy-type

additionalProperties: false

examples:
  - |
    #include <dt-bindings/interrupt-controller/arm-gic.h>
    #include <dt-bindings/clock/qcom,x1e80100-camcc.h>
    #include <dt-bindings/clock/qcom,x1e80100-gcc.h>
    #include <dt-bindings/phy/phy.h>

    csiphy0: csiphy@ace4000 {
        compatible = "qcom,x1e80100-mipi-csi2-combo-phy";
        reg = <0x0ace4000 0x2000>;
        #phy-cells = <0>;

        clocks = <&camcc CAM_CC_CAMNOC_AXI_RT_CLK>,
                 <&camcc CAM_CC_CPAS_AHB_CLK>,
                 <&camcc CAM_CC_CSIPHY0_CLK>,
                 <&camcc CAM_CC_CSI0PHYTIMER_CLK>;
        clock-names = "camnoc_axi",
                      "cpas_ahb",
                      "csiphy",
                      "csiphy_timer";

        interrupts = <GIC_SPI 477 IRQ_TYPE_EDGE_RISING>;

        power-domains = <&camcc CAM_CC_TITAN_TOP_GDSC>;

        vdda-0p8-supply = <&vreg_l2c_0p8>;
        vdda-1p2-supply = <&vreg_l1c_1p2>;

        phy-type = <PHY_TYPE_DPHY>;
    };
